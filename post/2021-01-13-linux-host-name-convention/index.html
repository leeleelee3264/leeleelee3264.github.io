<!DOCTYPE html>
<html lang="en">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.102.3" />


<link rel="shortcut icon" href="https://raw.githubusercontent.com/leeleelee3264/twitter_project/master/favicon.ico" />



<title>[Infra] (en) Name convention of host and URL - leelee.log</title>


<meta name="author" content="leeleelee3264" />


<meta name="description" content="Name Convention of Host and URL: Reserved characters and unsafe characters." />


<meta name="keywords" content="Infra" />


<meta property="og:title" content="[Infra] (en) Name convention of host and URL" />
<meta name="twitter:title" content="[Infra] (en) Name convention of host and URL" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leeleelee3264.github.io/post/2021-01-13-linux-host-name-convention/" /><meta property="og:description" content="Name Convention of Host and URL: Reserved characters and unsafe characters." />
<meta name="twitter:description" content="Name Convention of Host and URL: Reserved characters and unsafe characters." /><meta property="og:image" content="https://leeleelee3264.github.io/static/img/og.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://leeleelee3264.github.io/static/img/og.png" /><meta property="article:published_time" content="2021-01-13T00:00:00+00:00" /><meta property="article:modified_time" content="2021-01-13T00:00:00+00:00" />





<link rel="stylesheet" href="https://leeleelee3264.github.io/assets/css/fuji.min.e181e60016938cd78162d7c22f7ec19f5880c6aacdaab7ae8592045d2d789c21bf744ef23e8f88730329075863f798e21e966b92b81ed4bb64578b6ba1ecfdcf.css" integrity="sha512-4YHmABaTjNeBYtfCL37Bn1iAxqrNqreuhZIEXS14nCG/dE7yPo&#43;IcwMpB1hj95jiHpZrkrge1LtkV4troez9zw==" />








</head>

<body
  data-theme="light"
  data-theme-auto='false'
  >
    <script data-cfasync="false">
  
  var fujiThemeData = localStorage.getItem('fuji_data-theme');
  
  if (!fujiThemeData) {
    localStorage.setItem('fuji_data-theme', 'auto');
  } else {
    
    if (fujiThemeData !== 'auto') {
      document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
    }
  }
</script>

    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="https://leeleelee3264.github.io/">leelee.log</a>
            
        </div>
    </div>
</header>

    <main>
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                
<article>
    
    <h2 class="post-item post-title">
        <a href="https://leeleelee3264.github.io/post/2021-01-13-linux-host-name-convention/">[Infra] (en) Name convention of host and URL</a>
    </h2>
    <div class="post-item post-meta">
        <span><i class="iconfont icon-today-sharp"></i>&nbsp;2021-01-13</span>

<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;673 words</span>

<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href="/tags/infra">Infra</a>&nbsp;</span>

    </div>
    
    <div class="post-content markdown-body">
        <br>
<br> 
<blockquote>
<p>Name Convention of Host and URL: Reserved characters and unsafe characters.</p>
</blockquote>
<br> 
<p><strong>Index</strong></p>
<ol>
<li>Troubleshooting for Name Convention</li>
<li>Name Convention</li>
</ol>
<br> 
<h1 id="troubleshooting-for-name-convention">Troubleshooting for Name Convention</h1>
<h3 id="how-i-occurred-the-trouble">How I occurred the trouble</h3>
<p>Today, I had to be through very awful exception. There is an api server I have to send a request to update  meta data. For performance issue, this server just cached meta data and uses it till updated.
Usually it&rsquo;s quite simple. Make request with <code>RestTemplate</code> in Spring boot.</p>
<p>This situation got started two days age. <em>The server which contains api server moved to new ec2 machine, and it had new ip</em>. So I have to send my request to the new ip.
I had wrote a previous ip on <code>application.properties</code>. Just like this.</p>
<br> 
<blockquote>
<p>application.properties</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">api.server.domain=http://172.22.32.1:8000</span></span></span></code></pre></td></tr></table>
</div>
</div>
<br> 
<p>Let&rsquo;s say the new ip is <code>180.1.1.1:8000</code>. I could just change application.properties to <code>http://180.1.1.1:8000</code>, but it&rsquo;s so annoying I have to change application.properties file and rebuild, re-deploy server every time when ip gets changed.
I thought now is the perfect timing to use <code>/etc/hosts</code> file in Linux.</p>
<br> 
<h4 id="etchosts">/etc/hosts</h4>
<p>Domain is kine of alias of ip. In other words, every domain has its own ip. When we type domain to go to specific site, before this request goes any farther it goes to <code>DNS</code> server to get a real ip of the domain.</p>
<p><code>/etc/hosts</code> are local DNS file for own ubuntu machine. Ubuntu usually goes check the file first and goes to DNS. The file used to work like back up DNS long time age to prevent DNS error.</p>
<p>Nowadays, the file use to find host name which is not registered in DNS. For example, localhost. There is no real domain named localhost, it&rsquo;s just living in the file.</p>
<br> 
<blockquote>
<p>/etc/hosts example</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># /etc/hosts</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">127.0.0.1</span> <span style="color:#ae81ff">localhost</span>
</span></span><span style="display:flex;"><span>  </span></span></code></pre></td></tr></table>
</div>
</div>
<br> 
<p>Like localhost, I wanted to make own host name for this inner server. These were what I did.</p>
<blockquote>
<p>my own /etc/hosts</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># /etc/hosts in Linux  </span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">127.0.0.1</span> <span style="color:#ae81ff">api_call_server</span></span></span></code></pre></td></tr></table>
</div>
</div>
<br> 
<p>And used the domain like this.</p>
<blockquote>
<p>api_call_server in Spring boot</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> application<span style="color:#f92672">.</span><span style="color:#a6e22e">properties</span> in Spring boot 
</span></span><span style="display:flex;"><span>api<span style="color:#f92672">.</span><span style="color:#a6e22e">server</span><span style="color:#f92672">.</span><span style="color:#a6e22e">domain</span><span style="color:#f92672">=</span>http<span style="color:#f92672">:</span><span style="color:#75715e">//api_call_server
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> code in Spring boot and I use RestTemplate to send a request
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Value</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;${api.server.domain}&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> String serverDomain</span></span></code></pre></td></tr></table>
</div>
</div>
<br> 
<p>But it turned out I did something wrong. I kept getting <code>400 Bad request</code> from api server. You may get <code>unknown host exception</code> when you send a request to a host which is not in /etc/hosts file. But I already added!
On my second thought, maybe the reason for the exception is DNS caching. But it was not that.</p>
<br> 
<h4 id="reason-for-the-exception">Reason for the exception</h4>
<p><em>I used not allowed character in host name.</em></p>
<p>At that time, I should have known about host name convention better. you see, my own host name is <code>api_call_server</code> now let&rsquo;s see what characters are allowed for naming host.</p>
<br> 
<h3 id="name-convention">Name Convention</h3>
<h4 id="host-name-convention">Host Name convention</h4>
<ul>
<li><code>a-z</code>, <code>A-Z</code></li>
<li><code>0-9</code></li>
<li><code>-</code></li>
</ul>
<p>These are all. No others. I&rsquo;ll keep in mind I cannot use <code>_</code> in Url. Only Hyphen would work. So I change host name from <code>api_call_server</code> to <code>api-call-server</code>. After changing, I no longer saw 400 bad request.</p>
<br> 
<h3 id="url-name-convention">Url Name convention</h3>
<ul>
<li><code>a-z</code>, <code>A-Z</code></li>
<li><code>0-9</code></li>
<li><code>-</code></li>
<li><code>. _ ~ ( ) ' ! * : @ , ;</code></li>
</ul>
<br> 
<h4 id="not-safe-to-use">Not safe to use</h4>
<img class="img-zoomable medium-zoom-image __web-inspector-hide-shortcut__" src="https://user-images.githubusercontent.com/35620531/104724934-bc2fbc80-5774-11eb-8e14-834e49730680.png" >
<figcaption align = "center">[Picture 1] Not Safe in URL</figcaption>
<br> 
<p>In not safe, there are two concepts. Reserved and unsafe.</p>
<h5 id="reserved">Reserved</h5>
<ul>
<li>Literally reserved for system. You can see those letters in Linux env a lot. Safety of Url is not static when url containing reserved character. I think I&rsquo;d better not use them.</li>
</ul>
<h5 id="unsafe">Unsafe</h5>
<ul>
<li>Just do not use them. If I want to use one of them, I have to percent encoding and it&rsquo;s on RFC.</li>
</ul>
<br> 
<h4 id="plus-only-use-lower-case-in-url">(plus) only use lower case in URL</h4>
<p><em>We had better use Lowercase when it comes to making urls.</em></p>
<p>Lowercase is more traditional way and considering <code>UX</code>, users don&rsquo;t have to press shift.
And don&rsquo;t mix them too. (It called safe approach). With <code>SEO</code>(search engine optimize), google consider lowercase url and uppercase url are the same.</p>
<p>For example, <code>http://love.pizza.com/HOME.html</code> and <code>http://lova.pizza.com/home.html</code> are the same.
Take a look at <a href="https://www.searchenginejournal.com/url-capitalization-seo/343369/#close" target="_blank">[lower/upper matters]</a> for more information.</p>

    </div>
</article>



<div class="post-comment" data-comment="utterances">
    <span class="post-comment-notloaded">
        <i class="iconfont icon-chatbox-ellipses-sharp"></i>&nbsp;Load comments
    </span>
    <script>
        function loadComment() {
            var commentArea = document.querySelector('.post-comment');
            var utterancesTheme = document.body.getAttribute('data-theme');
            if (utterancesTheme === 'auto') {
                utterancesTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'photon-dark' :
                    'github-light';
            } else {
                utterancesTheme = utterancesTheme === 'dark' ? 'photon-dark' : 'github-light';
            }
            var s = document.createElement('script');
            s.src = 'https://utteranc.es/client.js';
            s.setAttribute('repo', 'leeleelee3264\/github_io_comment');
            s.setAttribute('issue-term', 'pathname');
            s.setAttribute('theme', utterancesTheme);
            s.setAttribute('crossorigin', 'anonymous');
            s.setAttribute('async', '');
            document.querySelector('.post-comment').appendChild(s);
            document.querySelector('span.post-comment-notloaded').setAttribute('style', 'display: none;');
        }
    </script>
</div>


            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/leeleelee3264" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://www.linkedin.com/in/seungmin4035/" target="_blank"><span>LinkedIn</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
            <span>
                <a href="/tags/backend/">Backend</a>
            </span>
            
            <span>
                <a href="/tags/book/">Book</a>
            </span>
            
            <span>
                <a href="/tags/cheat/">Cheat</a>
            </span>
            
            <span>
                <a href="/tags/frontend/">Frontend</a>
            </span>
            
            <span>
                <a href="/tags/general/">General</a>
            </span>
            
            <span>
                <a href="/tags/infra/">Infra</a>
            </span>
            
            <span>
                <a href="/tags/project/">Project</a>
            </span>
            
        </div>
    </div>
    
</aside>

        </div>
        <div class="btn">
    <div class="btn-menu" id="btn-menu">
        <i class="iconfont icon-grid-sharp"></i>
    </div>
    <div class="btn-toggle-mode">
        <i class="iconfont icon-contrast-sharp"></i>
    </div>
    <div class="btn-scroll-top">
        <i class="iconfont icon-chevron-up-circle-sharp"></i>
    </div>
</div>
<aside class="sidebar-mobile" style="display: none;">
  <div class="sidebar-wrapper">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/leeleelee3264" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://www.linkedin.com/in/seungmin4035/" target="_blank"><span>LinkedIn</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
            <span>
                <a href="/tags/backend/">Backend</a>
            </span>
            
            <span>
                <a href="/tags/book/">Book</a>
            </span>
            
            <span>
                <a href="/tags/cheat/">Cheat</a>
            </span>
            
            <span>
                <a href="/tags/frontend/">Frontend</a>
            </span>
            
            <span>
                <a href="/tags/general/">General</a>
            </span>
            
            <span>
                <a href="/tags/infra/">Infra</a>
            </span>
            
            <span>
                <a href="/tags/project/">Project</a>
            </span>
            
        </div>
    </div>
    
    
    
    
  </div>
</aside>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            
            <span>&copy; 2020-2023
                <a href="https://leeleelee3264.github.io/">leeleelee3264</a>
                 | <a href="https://github.com/leeleelee3264/leeleelee3264.github.io">Source code</a> 
                | Powered by <a href="https://github.com/dsrkafuu/hugo-theme-fuji/"
                   target="_blank">Fuji-v2</a> &amp; <a href="https://gohugo.io/"
                                                    target="_blank">Hugo</a> 
            </span>
        </div>
    </div>
</footer>

    
<script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js" integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/components/prism-core.min.js" integrity="sha512-LCKPTo0gtJ74zCNMbWw04ltmujpzSR4oW+fgN+Y1YclhM5ZrHCZQAJE4quEodcI/G122sRhSGU2BsSRUZ2Gu3w==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-GP4x8UWxWyh4BMbyJGOGneiTbkrWEF5izsVJByzVLodP8CuJH/n936+yQDMJJrOPUHLgyPbLiGw2rXmdvGdXHA==" crossorigin="anonymous"></script>



<script defer src="/assets/js/fuji.min.645f1123be695831f419ab54c1bcba327325895c740014006e57070d4f3e5d6b553e929c4b46f40ea707249e9c7f7c2a446d32a39ce7319f80a34525586a8e0f.js" integrity="sha512-ZF8RI75pWDH0GatUwby6MnMliVx0ABQAblcHDU8&#43;XWtVPpKcS0b0DqcHJJ6cf3wqRG0yo5znMZ&#43;Ao0UlWGqODw=="></script>



</body>

</html>
