<!DOCTYPE html>
<html lang="en">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.102.3" />


<link rel="shortcut icon" href="https://raw.githubusercontent.com/leeleelee3264/twitter_project/master/favicon.ico" />



<title>[Frontend] (en) How to implement drag and drop? - leelee.log</title>


<meta name="author" content="leeleelee3264" />


<meta name="description" content="Implement drag and drop to upload file." />


<meta name="keywords" content="Frontend" />


<meta property="og:title" content="[Frontend] (en) How to implement drag and drop?" />
<meta name="twitter:title" content="[Frontend] (en) How to implement drag and drop?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leeleelee3264.github.io/post/2020-10-08-front-dropdown-file/" /><meta property="og:description" content="Implement drag and drop to upload file." />
<meta name="twitter:description" content="Implement drag and drop to upload file." /><meta property="og:image" content="https://leeleelee3264.github.io/static/img/og.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://leeleelee3264.github.io/static/img/og.png" /><meta property="article:published_time" content="2020-10-08T00:00:00+00:00" /><meta property="article:modified_time" content="2020-10-08T00:00:00+00:00" />





<link rel="stylesheet" href="https://leeleelee3264.github.io/assets/css/fuji.min.f465179295d3a8a1b7dd2a219c27b03926b10f8caa3e362977d8c14a06e5ca1d1e074591d6900bbc0251d107c6ad6d1ba9f1e3eeaa344c51e97b9ae9490fff59.css" integrity="sha512-9GUXkpXTqKG33SohnCewOSaxD4yqPjYpd9jBSgblyh0eB0WR1pALvAJR0QfGrW0bqfHj7qo0TFHpe5rpSQ//WQ==" />








</head>

<body
  data-theme="light"
  data-theme-auto='false'
  >
    <script data-cfasync="false">
  
  var fujiThemeData = localStorage.getItem('fuji_data-theme');
  
  if (!fujiThemeData) {
    localStorage.setItem('fuji_data-theme', 'auto');
  } else {
    
    if (fujiThemeData !== 'auto') {
      document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
    }
  }
</script>

    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="https://leeleelee3264.github.io/">leelee.log</a>
            
        </div>
    </div>
</header>

    <main>
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                
<article>
    
    <h2 class="post-item post-title">
        <a href="https://leeleelee3264.github.io/post/2020-10-08-front-dropdown-file/">[Frontend] (en) How to implement drag and drop?</a>
    </h2>
    <div class="post-item post-meta">
        <span><i class="iconfont icon-today-sharp"></i>&nbsp;2020-10-08</span>

<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;852 words</span>

<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href="/tags/frontend">Frontend</a>&nbsp;</span>

    </div>
    
    <div class="post-content markdown-body">
        <br>
<br> 
<blockquote>
<p>Implement drag and drop to upload file.</p>
</blockquote>
<br> 
<p><strong>Index</strong></p>
<ol>
<li>Intro</li>
<li>Implement Drag and Drop</li>
</ol>
<br> 
<h1 id="intro">Intro</h1>
<h3 id="upload-file-with-more-action">Upload file with more action!</h3>
<p>Few days ago, I had to make a function that is about taking excel file from client side and reading it to save to our database. I usually go as simple as possible in terms of HTML/CSS, but this time I did some research and work!</p>
<p>Instead of using basic file chose button, dragging a file and dropping in to a box. I was very happy when finishing these process because I thought it&rsquo;s quite user friendly interface.</p>
<br> 
<img class="img-zoomable medium-zoom-image __web-inspector-hide-shortcut__" src="/static/img/post/dragdrop.PNG" >
<figcaption align = "center">[Picture 1] Drag and Drop</figcaption>
<br> 
<h1 id="implement-drag-and-drop">Implement Drag and Drop</h1>
<h3 id="html">HTML</h3>
<pre><code class="language-html">&lt;div class=&quot;file-upload&quot;&gt;
                &lt;button class=&quot;file-upload-btn&quot; type=&quot;button&quot; onclick=&quot;$('.file-upload-input').trigger( 'click' )&quot;&gt;Add Excel&lt;/button&gt;

                &lt;div class=&quot;image-upload-wrap&quot;&gt;
                    &lt;form id=&quot;vts_form&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;&gt;
                        &lt;input class=&quot;file-upload-input&quot; name=&quot;input-file&quot; type='file' onchange=&quot;readURL(this);&quot; accept=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot; /&gt;
                    &lt;/form&gt;
                    &lt;div class=&quot;drag-text&quot;&gt;
                        &lt;h3&gt;Drag your excel or click&lt;strong&gt; ADD EXCEL&lt;/strong&gt;&lt;/h3&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class=&quot;file-upload-content&quot;&gt;
                    &lt;img class=&quot;file-upload-image&quot; src=&quot;/assets/img/demo/excelIcon.png&quot; alt=&quot;excel icon&quot; /&gt;
                    &lt;div class=&quot;image-title-wrap&quot;&gt;
                        &lt;button type=&quot;button&quot; onclick=&quot;removeUpload()&quot; class=&quot;remove-image&quot;&gt;Remove &lt;span class=&quot;image-title&quot;&gt;Uploaded Excel&lt;/span&gt;&lt;/button&gt;
                        &lt;button type=&quot;button&quot;  class=&quot;upload-image&quot;&gt;Upload &lt;span class=&quot;image-title&quot;&gt;Uploaded Excel&lt;/span&gt;&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
</code></pre>
<br> 
<h4 id="mime-type">MIME Type</h4>
<p>In file input form, I had to set <code>accept attribute</code> first to let server know what kind of <code>Multipartfile</code> will be uploaded. It called <code>MIME type</code>. I found that MIME type of microsoft file are quite complicated and long. And surprised that there are so many same excel file with hundred extension such as xlsx, xls, cvs! Maybe next time, I need to consider the most general file extension for excel too.
<a href="https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types" target="_blank">[MIME type for input tag]</a></p>
<h4 id="take-file-extensions-as-many-as-possible">Take file extensions as many as possible</h4>
<p>And as we all know, our clients make unexpected exception. For example, I made a formatted excel template to write data easily. (giving them select box in cell). But my colleague didn&rsquo;t have excel software and try to open the template in google sheet.</p>
<p>Sadly, select box wasn&rsquo;t working. Furthermore, it didn&rsquo;t let us input data manually. It just gave us many alert of &lsquo;It&rsquo;s not allowed data in the cell&rsquo;. The point is, like i said I have to think about more general type of client situation.</p>
<br> 
<blockquote>
<p>Extension MIME Type</p>
</blockquote>
<pre><code>.doc      application/msword
.dot      application/msword

.docx     application/vnd.openxmlformats-officedocument.wordprocessingml.document
.dotx     application/vnd.openxmlformats-officedocument.wordprocessingml.template
.docm     application/vnd.ms-word.document.macroEnabled.12
.dotm     application/vnd.ms-word.template.macroEnabled.12

.xls      application/vnd.ms-excel
.xlt      application/vnd.ms-excel
.xla      application/vnd.ms-excel

.xlsx     application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
.xltx     application/vnd.openxmlformats-officedocument.spreadsheetml.template
.xlsm     application/vnd.ms-excel.sheet.macroEnabled.12
.xltm     application/vnd.ms-excel.template.macroEnabled.12
.xlam     application/vnd.ms-excel.addin.macroEnabled.12
.xlsb     application/vnd.ms-excel.sheet.binary.macroEnabled.12

.ppt      application/vnd.ms-powerpoint
.pot      application/vnd.ms-powerpoint
.pps      application/vnd.ms-powerpoint
.ppa      application/vnd.ms-powerpoint

.pptx     application/vnd.openxmlformats-officedocument.presentationml.presentation
.potx     application/vnd.openxmlformats-officedocument.presentationml.template
.ppsx     application/vnd.openxmlformats-officedocument.presentationml.slideshow
.ppam     application/vnd.ms-powerpoint.addin.macroEnabled.12
.pptm     application/vnd.ms-powerpoint.presentation.macroEnabled.12
.potm     application/vnd.ms-powerpoint.template.macroEnabled.12
.ppsm     application/vnd.ms-powerpoint.slideshow.macroEnabled.12

.mdb      application/vnd.ms-access
</code></pre>
<br> 
<h3 id="javascript">Javascript</h3>
<pre><code class="language-jsx">function readURL(input) {
        if (input.files &amp;&amp; input.files[0]) {

            let reader = new FileReader();

            reader.onload = function (e) {
                document.querySelector('.image-upload-wrap').style.display = 'none';
                document.querySelector('.file-upload-content').style.display = 'block';

                let imgTitles = document.querySelectorAll('.image-title');

                for(let title of imgTitles) {
                    title.innerHTML = input.files[0].name;
                }
            };

            reader.readAsDataURL(input.files[0]);

        } else {
            removeUpload();
        }
    }

    function removeUpload() {
        document.querySelector('.file-upload-input').value = &quot;&quot;;
        document.querySelector('.file-upload-content').style.display = 'none';
        document.querySelector('.image-upload-wrap').style.display = 'block';
    }

    document.addEventListener('DOMContentLoaded', function () {
        let imageElement = document.querySelector('.image-upload-wrap');
        let addedClass = 'image-dropping';

        imageElement.addEventListener('dragover', function () {
            imageElement.classList.add(addedClass)
        });

        imageElement.addEventListener('dragleave', function () {
            imageElement.classList.remove(addedClass)
        });
    })
    
</code></pre>
<br> 
<h4 id="vanilla-javascript">Vanilla javascript</h4>
<p>Recently I&rsquo;ve been trying to use <code>vanilla javascript</code> only and no <code>jQuery</code>. I was actually surprised that plain javascript cover almost everything. And I struggled a lot with <code>getElementByClassName</code>. It returns collection type, quite different with getElementById. I found out $(&rsquo;.className&rsquo;) is the same with document.querySelector(&rsquo;.className&rsquo;). <a href="http://youmightnotneedjquery.com/" target="_blank">[youmightnotneedjquery]</a> is very helpful.</p>
<h4 id="minor-troubleshooting">Minor troubleshooting</h4>
<p>When file is uploaded, excel icon will show up. But there was a problem. After removing an uploaded file, I tried to uploading the same file with previous one but the excel icon didn&rsquo;t show up because they are the same one. So I had to add removing img in <code>removeUpload()</code>.</p>
<br> 
<h3 id="css">CSS</h3>
<pre><code class="language-css">  *, *:before, *:after {
              box-sizing: border-box;
          }
  
      .file-upload {
          background-color: #ffffff;
          width: 100%;
          margin: 0 auto;
          padding: 20px;
      }

      .file-upload-btn {
          width: 100%;
          margin: 0;
          color: #fff;
          background: dodgerblue;
          border: none;
          padding: 10px;
          border-radius: 4px;
          border-bottom: 4px solid cornflowerblue;
          transition: all .2s ease;
          outline: none;
          text-transform: uppercase;
          font-weight: 700;
      }

      .file-upload-btn:hover {
          background: dodgerblue;
          color: #ffffff;
          transition: all .2s ease;
          cursor: pointer;
      }

      .file-upload-btn:active {
          border: 0;
          transition: all .2s ease;
      }

      .file-upload-content {
          display: none;
          text-align: center;
      }

      .file-upload-input {
          position: absolute;
          margin: 0;
          padding: 0;
          width: 100%;
          height: 100%;
          outline: none;
          opacity: 0;
          cursor: pointer;
      }

      .image-upload-wrap {
          margin-top: 20px;
          border: 4px dashed #1FB264;
          position: relative;
      }

      .image-dropping,
      .image-upload-wrap:hover {
          background-color: gainsboro;
          border: 4px dashed #ffffff;
      }

      .image-title-wrap {
          padding: 0 15px 15px 15px;
          color: #222;
      }

      .drag-text {
          text-align: center;
      }

      .drag-text h3 {
          font-weight: 100;
          text-transform: uppercase;
          color: #15824B;
          padding: 60px 0;
      }

      .file-upload-image {
          max-height: 200px;
          max-width: 200px;
          margin: auto;
          padding: 20px;
      }

      .remove-image {
          width: 200px;
          margin: 0;
          color: #fff;
          background: #cd4535;
          border: none;
          padding: 10px;
          border-radius: 4px;
          border-bottom: 4px solid #b02818;
          transition: all .2s ease;
          outline: none;
          text-transform: uppercase;
          font-weight: 700;
      }

      .remove-image:hover {
          background: grey;
          color: #ffffff;
          transition: all .2s ease;
          cursor: pointer;
      }

      .remove-image:active {
          border: 0;
          transition: all .2s ease;
      }

      .upload-image {
          width: 200px;
          margin: 0;
          color: #fff;
          background: lightseagreen;
          border: none;
          padding: 10px;
          border-radius: 4px;
          border-bottom: 4px solid forestgreen;
          transition: all .2s ease;
          outline: none;
          text-transform: uppercase;
          font-weight: 700;
      }

      .upload-image:hover {
          background: grey;
          color: #ffffff;
          transition: all .2s ease;
          cursor: pointer;
      }

      .upload-image:active {
          border: 0;
          transition: all .2s ease;
      }
</code></pre>

    </div>
</article>



<div class="post-comment" data-comment="utterances">
    <span class="post-comment-notloaded">
        <i class="iconfont icon-chatbox-ellipses-sharp"></i>&nbsp;Load comments
    </span>
    <script>
        function loadComment() {
            var commentArea = document.querySelector('.post-comment');
            var utterancesTheme = document.body.getAttribute('data-theme');
            if (utterancesTheme === 'auto') {
                utterancesTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'photon-dark' :
                    'github-light';
            } else {
                utterancesTheme = utterancesTheme === 'dark' ? 'photon-dark' : 'github-light';
            }
            var s = document.createElement('script');
            s.src = 'https://utteranc.es/client.js';
            s.setAttribute('repo', 'leeleelee3264\/github_io_comment');
            s.setAttribute('issue-term', 'pathname');
            s.setAttribute('theme', utterancesTheme);
            s.setAttribute('crossorigin', 'anonymous');
            s.setAttribute('async', '');
            document.querySelector('.post-comment').appendChild(s);
            document.querySelector('span.post-comment-notloaded').setAttribute('style', 'display: none;');
        }
    </script>
</div>


            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/leeleelee3264" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://www.linkedin.com/in/seungmin4035/" target="_blank"><span>LinkedIn</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
            <span>
                <a href="/tags/backend/">Backend</a>
            </span>
            
            <span>
                <a href="/tags/book/">Book</a>
            </span>
            
            <span>
                <a href="/tags/cheat/">Cheat</a>
            </span>
            
            <span>
                <a href="/tags/frontend/">Frontend</a>
            </span>
            
            <span>
                <a href="/tags/general/">General</a>
            </span>
            
            <span>
                <a href="/tags/infra/">Infra</a>
            </span>
            
            <span>
                <a href="/tags/project/">Project</a>
            </span>
            
        </div>
    </div>
    
</aside>

        </div>
        <div class="btn">
    <div class="btn-menu" id="btn-menu">
        <i class="iconfont icon-grid-sharp"></i>
    </div>
    <div class="btn-toggle-mode">
        <i class="iconfont icon-contrast-sharp"></i>
    </div>
    <div class="btn-scroll-top">
        <i class="iconfont icon-chevron-up-circle-sharp"></i>
    </div>
</div>
<aside class="sidebar-mobile" style="display: none;">
  <div class="sidebar-wrapper">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/leeleelee3264" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://www.linkedin.com/in/seungmin4035/" target="_blank"><span>LinkedIn</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
            <span>
                <a href="/tags/backend/">Backend</a>
            </span>
            
            <span>
                <a href="/tags/book/">Book</a>
            </span>
            
            <span>
                <a href="/tags/cheat/">Cheat</a>
            </span>
            
            <span>
                <a href="/tags/frontend/">Frontend</a>
            </span>
            
            <span>
                <a href="/tags/general/">General</a>
            </span>
            
            <span>
                <a href="/tags/infra/">Infra</a>
            </span>
            
            <span>
                <a href="/tags/project/">Project</a>
            </span>
            
        </div>
    </div>
    
    
    
    
  </div>
</aside>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            
            <span>&copy; 2020-2023
                <a href="https://leeleelee3264.github.io/">leeleelee3264</a>
                 | <a href="https://github.com/leeleelee3264/leeleelee3264.github.io">Source code</a> 
                | Powered by <a href="https://github.com/dsrkafuu/hugo-theme-fuji/"
                   target="_blank">Fuji-v2</a> &amp; <a href="https://gohugo.io/"
                                                    target="_blank">Hugo</a> 
            </span>
        </div>
    </div>
</footer>

    
<script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js" integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/components/prism-core.min.js" integrity="sha512-LCKPTo0gtJ74zCNMbWw04ltmujpzSR4oW+fgN+Y1YclhM5ZrHCZQAJE4quEodcI/G122sRhSGU2BsSRUZ2Gu3w==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-GP4x8UWxWyh4BMbyJGOGneiTbkrWEF5izsVJByzVLodP8CuJH/n936+yQDMJJrOPUHLgyPbLiGw2rXmdvGdXHA==" crossorigin="anonymous"></script>



<script defer src="/assets/js/fuji.min.645f1123be695831f419ab54c1bcba327325895c740014006e57070d4f3e5d6b553e929c4b46f40ea707249e9c7f7c2a446d32a39ce7319f80a34525586a8e0f.js" integrity="sha512-ZF8RI75pWDH0GatUwby6MnMliVx0ABQAblcHDU8&#43;XWtVPpKcS0b0DqcHJJ6cf3wqRG0yo5znMZ&#43;Ao0UlWGqODw=="></script>



</body>

</html>
